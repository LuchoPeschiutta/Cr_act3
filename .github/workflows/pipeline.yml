name: Pipeline

on:

  

  push:
    branches: [main]
    paths:
      - "index.html"

  pull_request:
    branches: [main]
    paths:
      - "index.html"

jobs:

  test_build_deploy:
    runs-on: ubuntu-20.04

    steps:

      - uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Test estatico
        run: echo "Aqui puedo hacer algunos test de c√≥digo estatico"

      - name: Building
        run: docker build -t my_nginx .

      - name: Test de aceptacion
        run: |
          docker-compose up -d
          curl localhost:80
          docker-compose down

      - name: Carga de la imagen a un registro
        run: echo "Aqui escribo la secuencia de comandos para cargar mi imagen en DockerHub, ECR u otros" # Pushear a DockerHub

      - name: Despliegue
        run: echo "Aqui escribo la secuencia de comandos para que alguna plataforma descargue la imagen y la despiegue" # Separar en un job aparte


    
